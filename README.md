# Echo智剪

一款基于FFmpeg的智能视频分片工具，提供图形用户界面，可以根据指定的时间点将一个视频文件切割成多个片段。

## 主要功能

- 图形用户界面，操作简单直观
- 自动加载默认视频和切割点文件
- 支持多种时间格式（HH:MM:SS,mmm 或 HH:MM:SS.mmm 或 MM:SS 或 SS）
- 实时显示处理进度和日志信息
- 音频降噪处理，减少背景噪音
- 保持视频质量
- 为切割后的视频添加顺序编号
- 提供视频切割总耗时统计
- 支持拖拽选择视频文件和切割点文件
- 处理完成后可直接打开输出目录

## 安装说明

### 方法一：直接运行可执行文件（推荐）

1. 双击运行 `Echo智剪.exe` 文件
2. 无需安装Python或其他依赖

### 方法二：从源代码运行

1. 确保已安装Python 3.6+
2. 安装所需依赖：
   ```
   pip install PyQt5
   ```
3. 确保已安装FFmpeg并添加到系统PATH中
4. 运行程序：
   ```
   python video_splitter_gui.py
   ```

### 方法三：构建自己的可执行文件

1. 确保已安装Python 3.6+
2. 运行构建脚本：
   ```
   python build_exe.py
   ```
3. 构建完成后，可执行文件将位于 `dist` 目录中

## 使用说明

### 环境要求

- 操作系统：Windows 7/8/10/11
- 确保已安装FFmpeg并添加到系统PATH中
  - 可以从 [FFmpeg官网](https://ffmpeg.org/download.html) 下载安装

### 默认设置

程序会自动处理以下默认路径：
- 视频文件：自动加载应用程序同目录下video文件夹中的MP4文件
- 切割点文件：自动加载应用程序同目录下video文件夹中的`视频切割点.txt`文件
- 输出目录：自动设置为应用程序同目录下video/output文件夹（如不存在将自动创建）

### 操作步骤

1. 运行Echo智剪程序
2. 选择要处理的视频文件（如未自动加载）
3. 选择切割点文件（如未自动加载）
4. 确认输出目录设置
5. 可选：勾选或取消"应用音频降噪处理"选项
6. 点击"开始处理"按钮开始视频切割
7. 等待处理完成，可以通过进度条和日志查看处理状态
8. 处理完成后可以点击"打开输出目录"查看结果

### 切割点文件格式

切割点文件应为文本文件（UTF-8或GBK编码），每行一个切割点，格式如下：
```
1、00:00:00,033~00:10:13,500，第一个视频片段名称
2、00:10:13,500~00:20:45,800，第二个视频片段名称
```

每行包含三个部分：
- 序号：以"、"结尾
- 时间段：开始时间和结束时间，以"~"分隔
- 片段名称：以"，"分隔

## 功能特点

### 视频处理
- 使用FFmpeg进行视频切割，保证高质量输出
- 保持原视频编码格式（H.264）
- 保持原音频质量（AAC编码，192kbps）

### 音频处理
当启用音频降噪功能时，将应用以下处理：
- 高通滤波（去除低频噪音）
- 低通滤波（去除高频噪音）
- FFT降噪（去除背景噪音）

### 用户界面
- 实时进度显示
- 详细的处理日志
- 可随时取消处理
- 自动加载默认文件
- 支持拖放文件

## 注意事项

1. 确保有足够的磁盘空间存储输出文件
2. 处理大文件时可能需要较长时间，请耐心等待
3. 可以通过日志窗口查看详细的处理信息
4. 如果遇到编码问题，程序会自动尝试不同的编码方式读取切割点文件

## 常见问题

1. **问题**：程序报错"未找到FFmpeg"
   **解决方案**：请确保已安装FFmpeg并添加到系统PATH中。可从 [FFmpeg官网](https://ffmpeg.org/download.html) 下载FFmpeg。

2. **问题**：无法读取切割点文件
   **解决方案**：确保切割点文件格式正确，并使用UTF-8或GBK编码保存。

3. **问题**：处理速度较慢
   **解决方案**：视频处理是计算密集型任务，处理速度取决于视频大小、时长和计算机性能。

## 版本历史

### v4.0 (当前版本)
- 添加图形用户界面
- 添加实时进度显示
- 添加处理日志
- 支持自动加载默认文件
- 支持取消处理操作
- 支持拖拽选择文件
- 优化用户体验

### v3.0
- 添加顺序编号到输出文件名
- 添加视频切割总耗时统计
- 添加音频降噪处理功能
- 优化输出信息显示

### v2.0
- 使用FFmpeg替代MoviePy库
- 修复切割点格式解析问题
- 提高处理速度和稳定性

### v1.0
- 基于MoviePy库的初始版本
- 实现基本视频切割功能